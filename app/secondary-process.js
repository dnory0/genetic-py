let timeChecker;
let timer = null;
let tempTimer = null;
let pauseTimer = null;
let accPauseTimer = [0, 0];
let sendTime = true;
function startTimeCalc() {
    timer = process.hrtime();
    timeChecker = setInterval(() => {
        if (!sendTime)
            return;
        tempTimer = process.hrtime(timer);
        tempTimer = [
            tempTimer[1] - accPauseTimer[1] < 0
                ? tempTimer[0] - accPauseTimer[0] - 1
                : tempTimer[0] - accPauseTimer[0],
            tempTimer[1] - accPauseTimer[1] < 0
                ? tempTimer[1] + 1000000000 - accPauseTimer[1]
                : tempTimer[1] - accPauseTimer[1]
        ];
        process.send(`time: ${Math.trunc(tempTimer[0] / 3600) < 10
            ? `0${Math.trunc(tempTimer[0] / 3600)}`
            : `${Math.trunc(tempTimer[0] / 3600)}`}:${Math.trunc((tempTimer[0] % 3600) / 60) < 10
            ? `0${Math.trunc((tempTimer[0] % 3600) / 60)}`
            : `${Math.trunc((tempTimer[0] % 3600) / 60)}`}:${tempTimer[0] % 60 < 10
            ? `0${tempTimer[0] % 60}`
            : `${tempTimer[0] % 60}`}:${tempTimer[1] < 100000000
            ? `0${Math.trunc(tempTimer[1] / 10000000)}`
            : `${Math.trunc(tempTimer[1] / 10000000)}`}`);
    }, 70);
}
function pauseTimeCalc() {
    sendTime = false;
    pauseTimer = process.hrtime();
}
function resumeTimeCalc() {
    pauseTimer = process.hrtime(pauseTimer);
    accPauseTimer = [
        1000000000 <= accPauseTimer[1] + pauseTimer[1]
            ? accPauseTimer[0] + pauseTimer[0] + 1
            : accPauseTimer[0] + pauseTimer[0],
        1000000000 < accPauseTimer[1] + pauseTimer[1]
            ? accPauseTimer[1] + pauseTimer[1] - 1000000000
            : accPauseTimer[1] + pauseTimer[1]
    ];
    sendTime = true;
}
function finishTimeCalc() {
    if (timeChecker)
        clearInterval(timeChecker);
    process.send('time-finished');
    pauseTimer = null;
    accPauseTimer = [0, 0];
    sendTime = true;
}
process.on('message', (message) => {
    if (message.includes('start'))
        startTimeCalc();
    else if (message.includes('pause'))
        pauseTimeCalc();
    else if (message.includes('resume'))
        resumeTimeCalc();
    else if (message.includes('finish'))
        finishTimeCalc();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Vjb25kYXJ5LXByb2Nlc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzZWNvbmRhcnktcHJvY2Vzcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnQkEsSUFBSSxXQUEyQixDQUFDO0FBRWhDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztBQUVqQixJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFFckIsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBRXRCLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBRzNCLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQztBQU1wQixTQUFTLGFBQWE7SUFDcEIsS0FBSyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUN6QixXQUFXLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRTtRQUM3QixJQUFJLENBQUMsUUFBUTtZQUFFLE9BQU87UUFDdEIsU0FBUyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEMsU0FBUyxHQUFHO1lBQ1YsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO2dCQUNqQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO2dCQUNyQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFDbkMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO2dCQUNqQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDO2dCQUM5QyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUM7U0FDcEMs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