const child_process = require('child_process');
const fs = require('fs');
const readline = require('readline');
require('colors');
let command = 'npm install';
const askUser = (question) => {
    const rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout
    });
    return new Promise(resolve => {
        rl.question(question.bold, (res) => {
            rl.close;
            resolve(res);
        });
    });
};
const wipeDeps = () => {
    const file = fs.readFileSync('package.json');
    const content = JSON.parse(file);
    const deps = Object.keys(content.dependencies);
    const devDeps = Object.keys(content.devDependencies);
    if (devDeps.length) {
        devDeps.forEach(v => (command += ` ${v}@latest`));
        command += ' -D';
    }
    if (devDeps.length && deps.length)
        command += ' && npm install';
    if (deps.length)
        deps.forEach(v => (command += ` ${v}@latest`));
    if (command.length < 12)
        return;
    child_process.spawn(command, {
        shell: true,
        cwd: __dirname,
        stdio: 'inherit'
    });
};
if (require.main == module)
    askUser('Note: you are updating node modules to latest version\nWhich might effect your code stability! continue? [y/N]').then((res) => {
        if (['y', 'yes'].includes(res.toLowerCase()))
            wipeDeps();
        else {
            console.log('Abort!');
            process.exit(0);
        }
    });
else
    module.exports = wipeDeps;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXBkYXRlLWRlcHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ1cGRhdGUtZGVwcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDL0MsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pCLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNyQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFFbEIsSUFBSSxPQUFPLEdBQUcsYUFBYSxDQUFDO0FBRTVCLE1BQU0sT0FBTyxHQUFHLENBQUMsUUFBZ0IsRUFBRSxFQUFFO0lBQ25DLE1BQU0sRUFBRSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFDbEMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLO1FBQ3BCLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTTtLQUN2QixDQUFDLENBQUM7SUFDSCxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQzNCLEVBQUUsQ0FBQyxRQUFRLENBQU8sUUFBUyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQVcsRUFBRSxFQUFFO1lBQ2hELEVBQUUsQ0FBQyxLQUFLLENBQUM7WUFDVCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDZixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDO0FBQ0YsTUFBTSxRQUFRLEdBQUcsR0FBRyxFQUFFO0lBQ3BCLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDN0MsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNqQyxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUMvQyxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUVyRCxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUU7UUFDbEIsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ2xELE9BQU8sSUFBSSxLQUFLLENBQUM7S0FDbEI7SUFDRCxJQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU07UUFBRSxPQUFPLElBQUksaUJBQWlCLENBQUM7SUFDaEUsSUFBSSxJQUFJLENBQUMsTUFBTTtRQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUVoRSxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsRUFBRTtRQUFFLE9BQU87SUFDaEMsYUFBYSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7UUFDM0IsS0FBSyxFQUFFLElBQUk7UUFDWCxHQUFHLEVBQUUsU0FBUztRQUNkLEtBQUssRUFBRSxTQUFTO0tBQ2pCLENBQUMsQ0FBQztBQUVMLENBQUMsQ0FBQztBQUVGLElBQUksT0FBTyxDQUFDLElBQUksSUFBSSxNQUFNO0lBQ3hCLE9BQU8sQ0FDTCxnSEFBZ0gsQ0FDakgsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFXLEVBQUUsRUFBRTtRQUNyQixJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUM7WUFBRSxRQUFRLEVBQUUsQ0FBQzthQUNwRDtZQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdEIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNqQjtJQUNILENBQUMsQ0FBQyxDQUFDOztJQUNBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDIn0=